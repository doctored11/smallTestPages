<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container mb-12" style="margin-bottom: 5rem">
      <h2>Task1</h2>
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="dropdownMenuButton1"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          выпадающий блок
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
          <li><a class="dropdown-item" href="#">1</a></li>
          <li><a class="dropdown-item" href="#">2</a></li>
          <li><a class="dropdown-item" href="#">3</a></li>
        </ul>
      </div>
    </div>

    <div class="container mb-12">
      <h2>Task1</h2>
      <form>
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">Имя</label>
          <input type="text" class="form-control" />
        </div>
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">Фамилия</label>
          <input type="text" class="form-control" />
        </div>
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">Отчество</label>
          <input type="text" class="form-control" />
        </div>
        <button type="submit" class="btn btn-primary">сохранить</button>
        <p class="save"></p>
      </form>
    </div>
    <!-- <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script> -->
    <script>
      // T1
      let FIOArr = [];
      let list = document.querySelector('.dropdown-toggle');
      let listBlock = document.querySelector('.dropdown-menu');
      let outputBlock = document.querySelector('.save');
      list.addEventListener('click', (ev) => {
        ev._isClicked = true;
        list.classList.toggle('show');
        listBlock.classList.toggle('show');
      });
      listBlock.addEventListener('click', (ev) => {
        ev._isClicked = true;
      });

      document.addEventListener('click', (ev) => {
        if (ev._isClicked) return;
        list.classList.remove('show');
        listBlock.classList.remove('show');
      });

      //   T2
      function checkInput() {
        // console.log(this.value[this.value.length - 1]);
        let letter = this.value[this.value.length - 1];
        let word = this.value.split('');
        if (!alf.includes(letter.toLowerCase())) {
          word.splice(word.length - 1, 1);
          this.value = word.join('');
        }
      }
      function totalCheck() {
        let word = this.value.split('');
        for (let i = 0; i < word.length; ++i) {
          if (!alf.includes(word[i])) {
            word.splice(i, 1);
            i--;
          }
        }
        this.value = word.join('');
      }
      const alf = 'абвгдеёжзийклмнопрстуфхцчщшьыъэюя';

      document.querySelectorAll('.form-control').forEach((element) => {
        element.addEventListener('input', checkInput);
        element.addEventListener('blur', totalCheck);
      });

      let btnForm = document.querySelector('.btn-primary');
      btnForm.addEventListener('click', addToFIOArr);
      function addToFIOArr() {
        event.preventDefault();
        let buff = '';
        document.querySelectorAll('.form-control').forEach((element) => {
          buff += element.value + ' ';
          element.value = '';
        });
        FIOArr.push(`<br> ${buff} </br>`);
        outputBlock.innerHTML = '';
        FIOArr.forEach((el) => {
          outputBlock.innerHTML += el;
        });
      }
    </script>
  </body>
</html>
